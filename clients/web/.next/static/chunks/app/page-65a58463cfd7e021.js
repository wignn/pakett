(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7014:function(e,a,s){Promise.resolve().then(s.bind(s,8650))},8650:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return u}});var l=s(7437),i=s(2265),n=s(6652),c=s(4322),t=s(6142),d=s(1961),o=s(2894);function r(e){var a,s,i,n,r,h,x;let{stats:v,loading:u}=e,j=[{label:"Total Packages",value:null!==(a=null==v?void 0:v.total_packages)&&void 0!==a?a:0,icon:c.Z,color:"blue",change:"+12%",positive:!0},{label:"Geocoded",value:null!==(s=null==v?void 0:v.geocoded_packages)&&void 0!==s?s:0,icon:t.Z,color:"green",change:"".concat(((null!==(i=null==v?void 0:v.avg_confidence)&&void 0!==i?i:0)*100).toFixed(0),"% avg conf"),positive:!0},{label:"Routes Today",value:null!==(n=null==v?void 0:v.total_routes_today)&&void 0!==n?n:0,icon:d.Z,color:"purple",change:"".concat(null!==(r=null==v?void 0:v.active_vehicles)&&void 0!==r?r:0," vehicles"),positive:!0},{label:"Need Verification",value:null!==(h=null==v?void 0:v.verification_needed)&&void 0!==h?h:0,icon:o.Z,color:"orange",change:(null==v?void 0:v.verification_needed)&&v.verification_needed>5?"Action needed":"All good",positive:(null!==(x=null==v?void 0:v.verification_needed)&&void 0!==x?x:0)<=5}];return(0,l.jsx)("div",{className:"stats-grid",children:j.map((e,a)=>{let s=e.icon;return(0,l.jsxs)("div",{className:"stat-card fade-in ".concat(u?"loading":""),style:{animationDelay:"".concat(50*a,"ms")},children:[(0,l.jsx)("div",{className:"stat-icon ".concat(e.color),children:(0,l.jsx)(s,{size:24})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"stat-value",children:u?"â€”":e.value.toLocaleString()}),(0,l.jsx)("div",{className:"stat-label",children:e.label}),(0,l.jsx)("div",{className:"stat-change ".concat(e.positive?"positive":"negative"),children:u?"":e.change})]})]},e.label)})})}var h=s(8476),x=s(5744),v=s(8222);function u(){let[e,a]=(0,i.useState)([]),[s,c]=(0,i.useState)(null),[t,d]=(0,i.useState)([]),[o,u]=(0,i.useState)(!0);async function j(){try{u(!0);let[e,s,l]=await Promise.all([(0,v.ZS)(),(0,v.mP)(),(0,v.H7)()]);a(e),c(s),d(l)}catch(e){console.error("Failed to load data:",e)}finally{u(!1)}}return(0,i.useEffect)(()=>{j()},[]),(0,l.jsxs)("div",{className:"layout",children:[(0,l.jsx)(n.Z,{active:"dashboard"}),(0,l.jsxs)("main",{className:"main-content",children:[(0,l.jsxs)("div",{className:"page-header",children:[(0,l.jsx)("h1",{className:"page-title",children:"Dashboard"}),(0,l.jsx)("p",{className:"page-description",children:"Real-time overview of package processing and route optimization"})]}),(0,l.jsx)(r,{stats:s,loading:o}),(0,l.jsxs)("div",{className:"grid-2",style:{marginTop:"24px"},children:[(0,l.jsxs)("div",{className:"card",children:[(0,l.jsxs)("div",{className:"card-header",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"card-title",children:"Route Overview"}),(0,l.jsx)("p",{className:"card-subtitle",children:"Today's delivery routes"})]}),(0,l.jsx)("button",{className:"btn btn-secondary btn-sm",children:"Optimize Routes"})]}),(0,l.jsx)(x.Z,{routes:t})]}),(0,l.jsxs)("div",{className:"card",children:[(0,l.jsxs)("div",{className:"card-header",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"card-title",children:"Recent Packages"}),(0,l.jsx)("p",{className:"card-subtitle",children:"Latest ingested packages"})]}),(0,l.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:j,children:"Refresh"})]}),(0,l.jsx)(h.Z,{packages:e.slice(0,8),compact:!0})]})]})]})]})}},8476:function(e,a,s){"use strict";s.d(a,{Z:function(){return h}});var l=s(7437),i=s(4322),n=s(2894),c=s(2442),t=s(9670),d=s(6142),o=s(9246);let r={pending:{label:"Pending",className:"badge-pending"},processing:{label:"Processing",className:"badge-processing"},parsed:{label:"Parsed",className:"badge-processing"},geocoded:{label:"Geocoded",className:"badge-geocoded"},routed:{label:"Routed",className:"badge-routed"},delivered:{label:"Delivered",className:"badge-geocoded"},verification_needed:{label:"Verify",className:"badge-verification"},failed:{label:"Failed",className:"badge-failed"}};function h(e){let{packages:a,compact:s,onSelect:h}=e;return 0===a.length?(0,l.jsxs)("div",{style:{padding:"40px",textAlign:"center",color:"var(--text-muted)"},children:[(0,l.jsx)(i.Z,{size:48,style:{marginBottom:"16px",opacity:.5}}),(0,l.jsx)("p",{children:"No packages found"})]}):(0,l.jsx)("div",{className:"table-container",children:(0,l.jsxs)("table",{className:"table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Package ID"}),!s&&(0,l.jsx)("th",{children:"Device"}),(0,l.jsx)("th",{children:"Address (OCR)"}),(0,l.jsx)("th",{children:"Confidence"}),(0,l.jsx)("th",{children:"Status"}),(0,l.jsx)("th",{children:"Time"}),!s&&(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:a.map(e=>{let a=r[e.status]||r.pending,i=(100*e.ocr_confidence).toFixed(0),x=e.ocr_confidence<.7;return(0,l.jsxs)("tr",{onClick:()=>null==h?void 0:h(e),style:{cursor:h?"pointer":"default"},children:[(0,l.jsx)("td",{children:(0,l.jsx)("span",{style:{fontFamily:"monospace",fontSize:"13px"},children:e.package_id})}),!s&&(0,l.jsx)("td",{style:{color:"var(--text-secondary)"},children:e.device_id}),(0,l.jsx)("td",{children:(0,l.jsx)("div",{style:{maxWidth:s?"200px":"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"13px"},children:e.ocr_text})}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:x?"var(--accent-orange)":"var(--accent-green)"},children:[x?(0,l.jsx)(n.Z,{size:14}):(0,l.jsx)(c.Z,{size:14}),(0,l.jsxs)("span",{children:[i,"%"]})]})}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{className:"badge ".concat(a.className),children:a.label})}),(0,l.jsx)("td",{style:{color:"var(--text-muted)",fontSize:"13px"},children:(0,o.Q)(new Date(e.created_at),{addSuffix:!0})}),!s&&(0,l.jsx)("td",{children:(0,l.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,l.jsx)("button",{className:"btn btn-icon btn-secondary",title:"View Details",children:(0,l.jsx)(t.Z,{size:16})}),(0,l.jsx)("button",{className:"btn btn-icon btn-secondary",title:"View on Map",children:(0,l.jsx)(d.Z,{size:16})})]})})]},e.id)})})]})})}}},function(e){e.O(0,[387,522,740,971,938,744],function(){return e(e.s=7014)}),_N_E=e.O()}]);