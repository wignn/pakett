(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[573],{2894:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a(2898).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2442:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a(2898).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},9670:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a(2898).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9753:function(e,t,a){Promise.resolve().then(a.bind(a,9838))},9838:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var n=a(7437),r=a(2265),i=a(6652),s=a(8222),d=a(2442),c=a(2894),l=a(2898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,l.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var p=a(9670);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,l.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function x(){var e;let[t,a]=(0,r.useState)([]),[l,x]=(0,r.useState)(!0),[h,g]=(0,r.useState)(null),[f,m]=(0,r.useState)(null),[v,y]=(0,r.useState)(!1);async function j(){try{x(!0);let e=(await (0,s.ZS)(100)).filter(e=>"verification_needed"===e.status||e.ocr_confidence<.7);a(e)}catch(e){console.error("Failed to load packages:",e)}finally{x(!1)}}async function _(e){g(e),y(!0);try{let t=await (0,s.Cy)(e.ocr_text);m(t)}catch(e){console.error("Failed to parse address:",e),m(null)}finally{y(!1)}}async function b(){if(h&&f)try{a(e=>e.filter(e=>e.id!==h.id)),g(null),m(null)}catch(e){console.error("Failed to approve:",e)}}async function k(){h&&(a(e=>e.filter(e=>e.id!==h.id)),g(null),m(null))}return(0,r.useEffect)(()=>{j()},[]),(0,n.jsxs)("div",{className:"layout",children:[(0,n.jsx)(i.Z,{active:"verification"}),(0,n.jsxs)("main",{className:"main-content",children:[(0,n.jsxs)("div",{className:"page-header",children:[(0,n.jsx)("h1",{className:"page-title",children:"Address Verification"}),(0,n.jsx)("p",{className:"page-description",children:"Review and correct low-confidence addresses"})]}),(0,n.jsxs)("div",{className:"grid-2",children:[(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("div",{className:"card-header",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"card-title",children:"Verification Queue"}),(0,n.jsxs)("p",{className:"card-subtitle",children:[t.length," items pending"]})]})}),l?(0,n.jsx)("div",{style:{padding:"40px",textAlign:"center",color:"var(--text-muted)"},children:"Loading..."}):0===t.length?(0,n.jsxs)("div",{style:{padding:"40px",textAlign:"center",color:"var(--text-muted)"},children:[(0,n.jsx)(d.Z,{size:48,style:{marginBottom:"16px",color:"var(--accent-green)"}}),(0,n.jsx)("p",{children:"All addresses verified!"})]}):(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t.map(e=>(0,n.jsxs)("button",{onClick:()=>_(e),style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",background:(null==h?void 0:h.id)===e.id?"var(--bg-hover)":"var(--bg-tertiary)",border:(null==h?void 0:h.id)===e.id?"1px solid var(--accent-blue)":"1px solid var(--border-primary)",borderRadius:"var(--radius-md)",cursor:"pointer",textAlign:"left",width:"100%",transition:"var(--transition-fast)"},children:[(0,n.jsx)(c.Z,{size:20,color:e.ocr_confidence<.5?"var(--accent-red)":"var(--accent-orange)"}),(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("div",{style:{fontWeight:"500",marginBottom:"4px"},children:e.package_id}),(0,n.jsx)("div",{style:{fontSize:"13px",color:"var(--text-secondary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"300px"},children:e.ocr_text})]}),(0,n.jsxs)("div",{style:{fontSize:"13px",color:e.ocr_confidence<.5?"var(--accent-red)":"var(--accent-orange)"},children:[(100*e.ocr_confidence).toFixed(0),"%"]}),(0,n.jsx)(o,{size:18,color:"var(--text-muted)"})]},e.id))})]}),(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("div",{className:"card-header",children:(0,n.jsx)("h2",{className:"card-title",children:"Verification Panel"})}),h?v?(0,n.jsx)("div",{style:{padding:"60px 40px",textAlign:"center",color:"var(--text-muted)"},children:(0,n.jsx)("div",{className:"loading",children:"Parsing address..."})}):(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,n.jsx)("label",{className:"input-label",children:"Original OCR Text"}),(0,n.jsx)("div",{style:{padding:"12px 16px",background:"var(--bg-tertiary)",borderRadius:"var(--radius-md)",border:"1px solid var(--border-primary)",fontSize:"14px"},children:h.ocr_text}),(0,n.jsxs)("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"4px"},children:["Confidence: ",(100*h.ocr_confidence).toFixed(0),"%"]})]}),f&&(0,n.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,n.jsx)("label",{className:"input-label",children:"Parsed Address"}),(0,n.jsxs)("div",{style:{padding:"16px",background:"var(--bg-tertiary)",borderRadius:"var(--radius-md)",border:"1px solid var(--border-primary)"},children:[(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:[f.street&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Street"}),(0,n.jsxs)("p",{children:[f.street," ",f.house_number]})]}),(f.rt||f.rw)&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"RT/RW"}),(0,n.jsxs)("p",{children:["RT ",f.rt||"-"," / RW ",f.rw||"-"]})]}),f.subdistrict&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Subdistrict"}),(0,n.jsx)("p",{children:f.subdistrict})]}),f.city&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"City"}),(0,n.jsx)("p",{children:f.city})]}),f.postal_code&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Postal Code"}),(0,n.jsx)("p",{children:f.postal_code})]})]}),(null===(e=f.corrections_applied)||void 0===e?void 0:e.length)>0&&(0,n.jsx)("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid var(--border-primary)"},children:(0,n.jsxs)("span",{style:{fontSize:"12px",color:"var(--accent-blue)"},children:["Corrections applied: ",f.corrections_applied.join(", ")]})})]}),(0,n.jsxs)("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"4px"},children:["Parse confidence: ",(100*f.confidence).toFixed(0),"%"]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,n.jsxs)("button",{className:"btn btn-danger",onClick:k,style:{flex:1},children:[(0,n.jsx)(u,{size:18}),"Reject"]}),(0,n.jsxs)("button",{className:"btn btn-success",onClick:b,style:{flex:1},children:[(0,n.jsx)(d.Z,{size:18}),"Approve"]})]})]}):(0,n.jsxs)("div",{style:{padding:"60px 40px",textAlign:"center",color:"var(--text-muted)"},children:[(0,n.jsx)(p.Z,{size:48,style:{marginBottom:"16px",opacity:.5}}),(0,n.jsx)("p",{children:"Select a package to verify"})]})]})]})]})]})}},6652:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var n=a(7437),r=a(1396),i=a.n(r),s=a(4033),d=a(5119),c=a(4322),l=a(6142),o=a(1961),p=a(1981),u=a(2457),x=a(9409);let h=[{id:"dashboard",label:"Dashboard",icon:d.Z,href:"/"},{id:"packages",label:"Packages",icon:c.Z,href:"/packages"},{id:"routes",label:"Routes",icon:l.Z,href:"/routes"},{id:"vehicles",label:"Vehicles",icon:o.Z,href:"/vehicles"},{id:"verification",label:"Verification",icon:p.Z,href:"/verification"},{id:"analytics",label:"Analytics",icon:u.Z,href:"/analytics"}];function g(e){let{active:t}=e,a=(0,s.usePathname)();return(0,n.jsxs)("aside",{className:"sidebar",children:[(0,n.jsx)("div",{style:{padding:"0 20px",marginBottom:"32px"},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,n.jsx)("div",{style:{width:"40px",height:"40px",background:"var(--gradient-blue)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(c.Z,{size:22,color:"white"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{style:{fontSize:"18px",fontWeight:"700"},children:"Paket"}),(0,n.jsx)("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Routing System"})]})]})}),(0,n.jsx)("nav",{children:(0,n.jsxs)("div",{style:{padding:"0 12px"},children:[(0,n.jsx)("p",{style:{fontSize:"11px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"1px",padding:"0 8px",marginBottom:"8px"},children:"Menu"}),h.map(e=>{let r=t===e.id||a===e.href,s=e.icon;return(0,n.jsxs)(i(),{href:e.href,style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderRadius:"var(--radius-md)",marginBottom:"4px",color:r?"var(--text-primary)":"var(--text-secondary)",background:r?"var(--bg-tertiary)":"transparent",transition:"var(--transition-fast)",position:"relative"},children:[r&&(0,n.jsx)("div",{style:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",width:"3px",height:"24px",background:"var(--gradient-blue)",borderRadius:"0 4px 4px 0"}}),(0,n.jsx)(s,{size:20}),(0,n.jsx)("span",{style:{fontSize:"14px",fontWeight:r?"500":"400"},children:e.label})]},e.id)})]})}),(0,n.jsx)("div",{style:{position:"absolute",bottom:"20px",left:"0",right:"0",padding:"0 12px"},children:(0,n.jsxs)(i(),{href:"/settings",style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderRadius:"var(--radius-md)",color:"var(--text-secondary)",transition:"var(--transition-fast)"},children:[(0,n.jsx)(x.Z,{size:20}),(0,n.jsx)("span",{style:{fontSize:"14px"},children:"Settings"})]})})]})}},8222:function(e,t,a){"use strict";async function n(e,t){let a=await fetch("".concat("/api/v1").concat(e),{headers:{"Content-Type":"application/json",...null==t?void 0:t.headers},...t});if(!a.ok)throw Error((await a.json().catch(()=>({detail:"Request failed"}))).detail||"HTTP ".concat(a.status));return a.json()}async function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;try{return(await n("/ingest?limit=".concat(e))).packages||[]}catch(t){return function(e){let t=["pending","geocoded","routed","verification_needed"],a=["Jakarta Selatan","Jakarta Pusat","Jakarta Barat","Jakarta Timur","Jakarta Utara"],n=["Jalan Sudirman","Jalan Thamrin","Jalan Gatot Subroto","Jalan Rasuna Said","Jalan Kemang"];return Array.from({length:e},(e,r)=>{let i=t[Math.floor(Math.random()*t.length)],s=a[Math.floor(Math.random()*a.length)],d=n[Math.floor(Math.random()*n.length)];return{id:"pkg-".concat(r+1),package_id:"PKT".concat(new Date().getFullYear()).concat(String(r+1).padStart(6,"0")),device_id:"scanner-".concat(Math.floor(20*Math.random())+1),ocr_text:"".concat(d," No. ").concat(Math.floor(200*Math.random())+1,", RT 0").concat(Math.floor(9*Math.random())+1,"/RW 0").concat(Math.floor(9*Math.random())+1,", ").concat(s),ocr_confidence:.3*Math.random()+.65,status:i,priority:Math.random()>.8?"high":"standard",created_at:new Date(Date.now()-864e5*Math.random()).toISOString()}})}(e)}}async function i(e){return n("/ingest/ocr-text",{method:"POST",body:JSON.stringify(e)})}async function s(e){return(await n("/address/parse",{method:"POST",body:JSON.stringify({raw_text:e,apply_corrections:!0})})).address}async function d(e){try{return(await n("/routes".concat(e?"?planned_date=".concat(e):""))).routes||[]}catch(e){return[{id:"route-1",vehicle_id:"V001",vehicle_code:"V001",driver_name:"Driver A",planned_date:new Date().toISOString().split("T")[0],status:"planned",total_distance_km:25.4,total_time_minutes:180,total_stops:12,stops:[{sequence:0,lat:-6.2088,lon:106.8456,address_summary:"Depot",status:"completed"},{sequence:1,package_id:"PKT001",lat:-6.225,lon:106.795,address_summary:"Jalan Sudirman 45",status:"pending"},{sequence:2,package_id:"PKT002",lat:-6.235,lon:106.78,address_summary:"Jalan Thamrin 12",status:"pending"},{sequence:3,package_id:"PKT003",lat:-6.215,lon:106.82,address_summary:"Jalan Gatot Subroto 78",status:"pending"}]},{id:"route-2",vehicle_id:"V002",vehicle_code:"V002",driver_name:"Driver B",planned_date:new Date().toISOString().split("T")[0],status:"planned",total_distance_km:18.7,total_time_minutes:150,total_stops:8,stops:[{sequence:0,lat:-6.2088,lon:106.8456,address_summary:"Depot",status:"completed"},{sequence:1,package_id:"PKT004",lat:-6.18,lon:106.83,address_summary:"Jalan Kemang 33",status:"pending"},{sequence:2,package_id:"PKT005",lat:-6.19,lon:106.85,address_summary:"Jalan Rasuna Said 99",status:"pending"}]}]}}async function c(e){return n("/routes/optimize",{method:"POST",body:JSON.stringify(e)})}async function l(){try{await n("/health/ready");let e=await r(200);return{total_packages:e.length,pending_packages:e.filter(e=>"pending"===e.status).length,geocoded_packages:e.filter(e=>"geocoded"===e.status).length,routed_packages:e.filter(e=>"routed"===e.status).length,verification_needed:e.filter(e=>"verification_needed"===e.status).length,total_routes_today:0,active_vehicles:3,avg_confidence:e.reduce((e,t)=>e+t.ocr_confidence,0)/e.length||0}}catch(e){return{total_packages:156,pending_packages:12,geocoded_packages:89,routed_packages:45,verification_needed:10,total_routes_today:8,active_vehicles:5,avg_confidence:.87}}}a.d(t,{Cy:function(){return s},H7:function(){return d},ZS:function(){return r},mP:function(){return l},r7:function(){return i},x$:function(){return c}})}},function(e){e.O(0,[387,971,938,744],function(){return e(e.s=9753)}),_N_E=e.O()}]);