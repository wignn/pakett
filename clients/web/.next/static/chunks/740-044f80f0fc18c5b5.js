"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[740],{4930:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let n=a(1024);a(2265);let r=n._(a(4795));function i(e){return{default:(null==e?void 0:e.default)||e}}function s(e,t){let a=r.default,n={loading:e=>{let{error:t,isLoading:a,pastDelay:n}=e;return null}};"function"==typeof e&&(n.loader=e),Object.assign(n,t);let s=n.loader;return a({...n,loader:()=>null!=s?s().then(i):Promise.resolve(i(()=>null))})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6005:function(e,t,a){function n(e){let{children:t}=e;return t}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NoSSR",{enumerable:!0,get:function(){return n}}),a(6491)},4795:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let n=a(1024)._(a(2265)),r=a(6005),i=function(e){let t=Object.assign({loader:null,loading:null,ssr:!0},e);function a(e){let a=t.loading,i=n.default.createElement(a,{isLoading:!0,pastDelay:!0,error:null}),s=t.ssr?n.default.Fragment:r.NoSSR,o=t.lazy;return n.default.createElement(n.default.Suspense,{fallback:i},n.default.createElement(s,null,n.default.createElement(o,e)))}return t.lazy=n.default.lazy(t.loader),a.displayName="LoadableComponent",a}},5744:function(e,t,a){a.d(t,{Z:function(){return h}});var n=a(7437),r=a(2265),i=a(4930),s=a.n(i);let o=s()(()=>Promise.all([a.e(212),a.e(286)]).then(a.bind(a,1286)).then(e=>e.MapContainer),{loadableGenerated:{webpack:()=>[1286]},ssr:!1}),l=s()(()=>Promise.all([a.e(212),a.e(286)]).then(a.bind(a,1286)).then(e=>e.TileLayer),{loadableGenerated:{webpack:()=>[1286]},ssr:!1}),d=s()(()=>Promise.all([a.e(212),a.e(286)]).then(a.bind(a,1286)).then(e=>e.Marker),{loadableGenerated:{webpack:()=>[1286]},ssr:!1}),c=s()(()=>Promise.all([a.e(212),a.e(286)]).then(a.bind(a,1286)).then(e=>e.Popup),{loadableGenerated:{webpack:()=>[1286]},ssr:!1}),u=s()(()=>Promise.all([a.e(212),a.e(286)]).then(a.bind(a,1286)).then(e=>e.Polyline),{loadableGenerated:{webpack:()=>[1286]},ssr:!1}),p=["#3b82f6","#22c55e","#f97316","#a855f7","#ec4899"];function h(e){let{routes:t,height:a=400}=e,[i,s]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{s(!0)},[]),i)?(0,n.jsxs)("div",{className:"map-container",style:{height:a},children:[(0,n.jsx)("link",{rel:"stylesheet",href:"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",integrity:"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=",crossOrigin:""}),(0,n.jsxs)(o,{center:[-6.2088,106.8456],zoom:12,style:{height:"100%",width:"100%"},children:[(0,n.jsx)(l,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}),t.map((e,t)=>{let a=p[t%p.length],r=e.stops||[],i=r.map(e=>[e.lat,e.lon]);return(0,n.jsxs)("div",{children:[i.length>1&&(0,n.jsx)(u,{positions:i,pathOptions:{color:a,weight:4,opacity:.8,dashArray:"10, 5"}}),r.map((t,r)=>(0,n.jsx)(d,{position:[t.lat,t.lon],children:(0,n.jsx)(c,{children:(0,n.jsxs)("div",{style:{minWidth:"150px"},children:[(0,n.jsx)("strong",{style:{color:a},children:e.vehicle_code||e.vehicle_id}),(0,n.jsxs)("p",{style:{margin:"4px 0"},children:["Stop #",t.sequence,": ",t.address_summary||"Unknown"]}),t.package_id&&(0,n.jsxs)("p",{style:{fontSize:"12px",color:"#666"},children:["Package: ",t.package_id]})]})})},"".concat(e.id,"-").concat(r)))]},e.id)})]})]}):(0,n.jsx)("div",{className:"map-container",style:{height:a,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-tertiary)"},children:(0,n.jsx)("p",{style:{color:"var(--text-muted)"},children:"Loading map..."})})}},6652:function(e,t,a){a.d(t,{Z:function(){return g}});var n=a(7437),r=a(1396),i=a.n(r),s=a(4033),o=a(5119),l=a(4322),d=a(6142),c=a(1961),u=a(1981),p=a(2457),h=a(9409);let f=[{id:"dashboard",label:"Dashboard",icon:o.Z,href:"/"},{id:"packages",label:"Packages",icon:l.Z,href:"/packages"},{id:"routes",label:"Routes",icon:d.Z,href:"/routes"},{id:"vehicles",label:"Vehicles",icon:c.Z,href:"/vehicles"},{id:"verification",label:"Verification",icon:u.Z,href:"/verification"},{id:"analytics",label:"Analytics",icon:p.Z,href:"/analytics"}];function g(e){let{active:t}=e,a=(0,s.usePathname)();return(0,n.jsxs)("aside",{className:"sidebar",children:[(0,n.jsx)("div",{style:{padding:"0 20px",marginBottom:"32px"},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,n.jsx)("div",{style:{width:"40px",height:"40px",background:"var(--gradient-blue)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(l.Z,{size:22,color:"white"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{style:{fontSize:"18px",fontWeight:"700"},children:"Paket"}),(0,n.jsx)("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Routing System"})]})]})}),(0,n.jsx)("nav",{children:(0,n.jsxs)("div",{style:{padding:"0 12px"},children:[(0,n.jsx)("p",{style:{fontSize:"11px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"1px",padding:"0 8px",marginBottom:"8px"},children:"Menu"}),f.map(e=>{let r=t===e.id||a===e.href,s=e.icon;return(0,n.jsxs)(i(),{href:e.href,style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderRadius:"var(--radius-md)",marginBottom:"4px",color:r?"var(--text-primary)":"var(--text-secondary)",background:r?"var(--bg-tertiary)":"transparent",transition:"var(--transition-fast)",position:"relative"},children:[r&&(0,n.jsx)("div",{style:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",width:"3px",height:"24px",background:"var(--gradient-blue)",borderRadius:"0 4px 4px 0"}}),(0,n.jsx)(s,{size:20}),(0,n.jsx)("span",{style:{fontSize:"14px",fontWeight:r?"500":"400"},children:e.label})]},e.id)})]})}),(0,n.jsx)("div",{style:{position:"absolute",bottom:"20px",left:"0",right:"0",padding:"0 12px"},children:(0,n.jsxs)(i(),{href:"/settings",style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderRadius:"var(--radius-md)",color:"var(--text-secondary)",transition:"var(--transition-fast)"},children:[(0,n.jsx)(h.Z,{size:20}),(0,n.jsx)("span",{style:{fontSize:"14px"},children:"Settings"})]})})]})}},8222:function(e,t,a){async function n(e,t){let a=await fetch("".concat("/api/v1").concat(e),{headers:{"Content-Type":"application/json",...null==t?void 0:t.headers},...t});if(!a.ok)throw Error((await a.json().catch(()=>({detail:"Request failed"}))).detail||"HTTP ".concat(a.status));return a.json()}async function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;try{return(await n("/ingest?limit=".concat(e))).packages||[]}catch(t){return function(e){let t=["pending","geocoded","routed","verification_needed"],a=["Jakarta Selatan","Jakarta Pusat","Jakarta Barat","Jakarta Timur","Jakarta Utara"],n=["Jalan Sudirman","Jalan Thamrin","Jalan Gatot Subroto","Jalan Rasuna Said","Jalan Kemang"];return Array.from({length:e},(e,r)=>{let i=t[Math.floor(Math.random()*t.length)],s=a[Math.floor(Math.random()*a.length)],o=n[Math.floor(Math.random()*n.length)];return{id:"pkg-".concat(r+1),package_id:"PKT".concat(new Date().getFullYear()).concat(String(r+1).padStart(6,"0")),device_id:"scanner-".concat(Math.floor(20*Math.random())+1),ocr_text:"".concat(o," No. ").concat(Math.floor(200*Math.random())+1,", RT 0").concat(Math.floor(9*Math.random())+1,"/RW 0").concat(Math.floor(9*Math.random())+1,", ").concat(s),ocr_confidence:.3*Math.random()+.65,status:i,priority:Math.random()>.8?"high":"standard",created_at:new Date(Date.now()-864e5*Math.random()).toISOString()}})}(e)}}async function i(e){return n("/ingest/ocr-text",{method:"POST",body:JSON.stringify(e)})}async function s(e){return(await n("/address/parse",{method:"POST",body:JSON.stringify({raw_text:e,apply_corrections:!0})})).address}async function o(e){try{return(await n("/routes".concat(e?"?planned_date=".concat(e):""))).routes||[]}catch(e){return[{id:"route-1",vehicle_id:"V001",vehicle_code:"V001",driver_name:"Driver A",planned_date:new Date().toISOString().split("T")[0],status:"planned",total_distance_km:25.4,total_time_minutes:180,total_stops:12,stops:[{sequence:0,lat:-6.2088,lon:106.8456,address_summary:"Depot",status:"completed"},{sequence:1,package_id:"PKT001",lat:-6.225,lon:106.795,address_summary:"Jalan Sudirman 45",status:"pending"},{sequence:2,package_id:"PKT002",lat:-6.235,lon:106.78,address_summary:"Jalan Thamrin 12",status:"pending"},{sequence:3,package_id:"PKT003",lat:-6.215,lon:106.82,address_summary:"Jalan Gatot Subroto 78",status:"pending"}]},{id:"route-2",vehicle_id:"V002",vehicle_code:"V002",driver_name:"Driver B",planned_date:new Date().toISOString().split("T")[0],status:"planned",total_distance_km:18.7,total_time_minutes:150,total_stops:8,stops:[{sequence:0,lat:-6.2088,lon:106.8456,address_summary:"Depot",status:"completed"},{sequence:1,package_id:"PKT004",lat:-6.18,lon:106.83,address_summary:"Jalan Kemang 33",status:"pending"},{sequence:2,package_id:"PKT005",lat:-6.19,lon:106.85,address_summary:"Jalan Rasuna Said 99",status:"pending"}]}]}}async function l(e){return n("/routes/optimize",{method:"POST",body:JSON.stringify(e)})}async function d(){try{await n("/health/ready");let e=await r(200);return{total_packages:e.length,pending_packages:e.filter(e=>"pending"===e.status).length,geocoded_packages:e.filter(e=>"geocoded"===e.status).length,routed_packages:e.filter(e=>"routed"===e.status).length,verification_needed:e.filter(e=>"verification_needed"===e.status).length,total_routes_today:0,active_vehicles:3,avg_confidence:e.reduce((e,t)=>e+t.ocr_confidence,0)/e.length||0}}catch(e){return{total_packages:156,pending_packages:12,geocoded_packages:89,routed_packages:45,verification_needed:10,total_routes_today:8,active_vehicles:5,avg_confidence:.87}}}a.d(t,{Cy:function(){return s},H7:function(){return o},ZS:function(){return r},mP:function(){return d},r7:function(){return i},x$:function(){return l}})}}]);