(()=>{var e={};e.id=316,e.ids=[316],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},1942:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>d});var a=t(482),i=t(9108),r=t(2563),n=t.n(r),l=t(8300),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["routes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7395)),"C:\\Users\\tigfi\\Downloads\\paket\\clients\\web\\src\\app\\routes\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1342)),"C:\\Users\\tigfi\\Downloads\\paket\\clients\\web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\tigfi\\Downloads\\paket\\clients\\web\\src\\app\\routes\\page.tsx"],x="/routes/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/routes/page",pathname:"/routes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6084:(e,s,t)=>{Promise.resolve().then(t.bind(t,924))},3733:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9224).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},924:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var a=t(2295),i=t(3729),r=t(5831),n=t(4541),l=t(6548),c=t(3733),d=t(9224);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,d.Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),x=(0,d.Z)("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);var p=t(6278),m=t(508);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,d.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function h(){let[e,s]=(0,i.useState)([]),[t,d]=(0,i.useState)(!0),[h,g]=(0,i.useState)(!1),[v,j]=(0,i.useState)(null),[y,f]=(0,i.useState)(new Date().toISOString().split("T")[0]);async function b(){try{d(!0);let e=await (0,l.H7)(y);s(e)}catch(e){console.error("Failed to load routes:",e)}finally{d(!1)}}async function _(){try{g(!0);let e=await (0,l.x$)({planned_date:y,max_solve_time_seconds:120,balance_routes:!0});j(e),await b()}catch(e){console.error("Optimization failed:",e)}finally{g(!1)}}(0,i.useEffect)(()=>{b()},[y]);let N=e.reduce((e,s)=>e+s.total_distance_km,0),k=e.reduce((e,s)=>e+s.total_time_minutes,0),z=e.reduce((e,s)=>e+s.total_stops,0);return(0,a.jsxs)("div",{className:"layout",children:[a.jsx(r.Z,{active:"routes"}),(0,a.jsxs)("main",{className:"main-content",children:[(0,a.jsxs)("div",{className:"page-header",children:[a.jsx("h1",{className:"page-title",children:"Route Optimization"}),a.jsx("p",{className:"page-description",children:"Optimize and manage delivery routes using VRP algorithms"})]}),a.jsx("div",{className:"card",style:{marginBottom:"24px"},children:(0,a.jsxs)("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:[(0,a.jsxs)("div",{className:"input-group",style:{marginBottom:0},children:[a.jsx("label",{className:"input-label",children:"Planned Date"}),a.jsx("input",{type:"date",className:"input",value:y,onChange:e=>f(e.target.value),style:{width:"180px"}})]}),a.jsx("div",{style:{flex:1}}),(0,a.jsxs)("button",{className:"btn btn-secondary",onClick:b,disabled:t,children:[a.jsx(c.Z,{size:16,className:t?"loading":""}),"Refresh"]}),(0,a.jsxs)("button",{className:"btn btn-primary",onClick:_,disabled:h,children:[a.jsx(o,{size:16}),h?"Optimizing...":"Run Optimization"]})]})}),v&&a.jsx("div",{className:"card",style:{marginBottom:"24px",background:v.success?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",borderColor:v.success?"var(--accent-green)":"var(--accent-red)"},children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:v.success?"var(--accent-green)":"var(--accent-red)",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(x,{size:24,color:"white"})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{style:{margin:0},children:v.success?"Optimization Complete!":"Optimization Failed"}),a.jsx("p",{style:{margin:"4px 0 0",color:"var(--text-secondary)"},children:v.success?`Created ${v.total_vehicles_used} routes for ${v.total_packages} packages in ${v.optimization_time_ms}ms`:v.error})]}),a.jsx("button",{className:"btn btn-secondary btn-sm",style:{marginLeft:"auto"},onClick:()=>j(null),children:"Dismiss"})]})}),(0,a.jsxs)("div",{className:"stats-grid",style:{marginBottom:"24px"},children:[(0,a.jsxs)("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon purple",children:a.jsx(p.Z,{size:24})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"stat-value",children:e.length}),a.jsx("div",{className:"stat-label",children:"Active Routes"})]})]}),(0,a.jsxs)("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon blue",children:a.jsx(m.Z,{size:24})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"stat-value",children:z}),a.jsx("div",{className:"stat-label",children:"Total Stops"})]})]}),(0,a.jsxs)("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon green",children:a.jsx(x,{size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"stat-value",children:[N.toFixed(1)," km"]}),a.jsx("div",{className:"stat-label",children:"Total Distance"})]})]}),(0,a.jsxs)("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon orange",children:a.jsx(u,{size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"stat-value",children:[Math.round(k/60),"h ",k%60,"m"]}),a.jsx("div",{className:"stat-label",children:"Est. Duration"})]})]})]}),(0,a.jsxs)("div",{className:"grid-2",children:[(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h2",{className:"card-title",children:"Route Map"})}),a.jsx(n.Z,{routes:e,height:500})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h2",{className:"card-title",children:"Routes List"})}),0===e.length?(0,a.jsxs)("div",{style:{padding:"40px",textAlign:"center",color:"var(--text-muted)"},children:[a.jsx(p.Z,{size:48,style:{marginBottom:"16px",opacity:.5}}),a.jsx("p",{children:"No routes for this date"}),a.jsx("p",{style:{fontSize:"14px",marginTop:"8px"},children:"Run optimization to create routes"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:e.map((e,s)=>(0,a.jsxs)("div",{style:{padding:"16px",background:"var(--bg-tertiary)",borderRadius:"var(--radius-md)",border:"1px solid var(--border-primary)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[a.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:["#3b82f6","#22c55e","#f97316","#a855f7","#ec4899"][s%5],display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600",fontSize:"14px"},children:e.vehicle_code?.[1]||s+1}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:e.vehicle_code||e.vehicle_id}),e.driver_name&&a.jsx("span",{style:{color:"var(--text-muted)",marginLeft:"8px"},children:e.driver_name})]}),a.jsx("span",{className:`badge badge-${"planned"===e.status?"processing":"geocoded"}`,style:{marginLeft:"auto"},children:e.status})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"24px",fontSize:"14px",color:"var(--text-secondary)"},children:[(0,a.jsxs)("span",{children:[a.jsx(m.Z,{size:14,style:{marginRight:"4px"}}),e.total_stops," stops"]}),(0,a.jsxs)("span",{children:[a.jsx(x,{size:14,style:{marginRight:"4px"}}),e.total_distance_km.toFixed(1)," km"]}),(0,a.jsxs)("span",{children:[a.jsx(u,{size:14,style:{marginRight:"4px"}}),e.total_time_minutes," min"]})]})]},e.id))})]})]})]})]})}},7395:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>r,__esModule:()=>i,default:()=>n});let a=(0,t(6843).createProxy)(String.raw`C:\Users\tigfi\Downloads\paket\clients\web\src\app\routes\page.tsx`),{__esModule:i,$$typeof:r}=a,n=a.default}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[803,716,613],()=>t(1942));module.exports=a})();